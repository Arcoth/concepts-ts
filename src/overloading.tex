
%%
%% Overloading
%%
\setcounter{chapter}{12}
\rSec0[over]{Overloading}

Modify paragraph 1 to allow overloading based on constraints.

\begin{quote}
\pnum
When two or more different declarations are specified for a single name 
in the same scope, that name is said to be overloaded. By extension, two 
declarations in the same scope that declare the same name but with
different types \added{or different associated constraints (Clause~\ref{temp})}
are called \defn{overloaded declarations}. Only function and function 
template declarations can be overloaded; variable and type declarations 
cannot be overloaded.
\end{quote}

Update paragraph 3 to mention a function's overloaded constraints. 
Note that the itemized list in the original text is omitted in this
document.

\begin{quote}
\setcounter{Paras}{2}
\pnum
\enternote
As specified in \ref{dcl.fct}, function declarations that have equivalent 
parameter declarations \added{and associated constraints, if any 
(Clause~\ref{temp})}, declare the same function and therefore cannot be 
overloaded: ...
\exitnote
\end{quote}


%%
%% Declaration matching
%%
\rSec2[over.dcl]{Declaration matching}

Modify paragraph 1 to extend the notion of declaration matching to
also include a function's associated constrains. Note that the
example in the original text is omitted in this document.

\begin{quote}
Two function declarations of the same name refer to the same function if 
they are in the same scope and have equivalent parameter declarations 
(\ref{over.load}) \added{and equivalent associated constraints, if any 
(Clause~\ref{temp})}.
\end{quote}


%%
%% Overload resolution
%%
\setcounter{section}{2}
\rSec1[over.match]{Overload resolution}


%%
%% Viable functions
%%
\setcounter{subsection}{1}
\rSec2[over.match.viable]{Viable functions}

Update paragraph 1 to require the checking of a candidate's associated
constraints when determining if that candidate is viable.

\begin{quote}
\pnum
From the set of candidate functions constructed for a given context 
(\cxxref{over.match.funcs}), a set of viable functions is chosen, from which 
the best function will be selected by comparing argument conversion 
sequences and associated constraints for the best fit 
(\ref{over.match.best}).
%
The selection of viable functions considers \added{associated constraints, 
if any (Clause~\ref{temp}), and} relationships between arguments and function 
parameters other than the ranking of conversion sequences.
\end{quote}


Insert the following paragraph after paragraph 1; this introduces
new a criterion for determining if a candidate is viable. Also, update
the beginning of the subsequent paragraphs to account for the
insertion.

\begin{quote}
\setcounter{Paras}{1}
\pnum
First, for \tcode{F} to be a viable function, if \tcode{F} has 
associated constraints (\ref{temp}), those 
constraints shall be satisfied (\ref{temp.constr}).

\pnum
\removed{First}\added{Second}, to be a viable function ...

\pnum
\removed{Second}\added{Third}, for \tcode{F} to be a viable function ...
\end{quote}


%%
%% Best viable function
%%
\rSec2[over.match.best]{Best viable function}

Modify the last item in the list in paragraph 1 and extend it with a final
comparison based on the associated constraints of those functions. Note that 
the preceding (unmodified) items in the original document are elided in this
document.

\begin{quote}
\begin{itemize}
\item \ldots

\item \tcode{F1} and \tcode{F2} are function template specializations, and 
the function template for \tcode{F1} is more specialized than the template 
for \tcode{F2} according to the partial ordering rules described in
\ref{temp.func.order}\removed{.}\added{, or, if not that,}

\item
The parameter-type-lists of \tcode{F1} and \tcode{F2} are
the same and \tcode{F1} is more constrained than \tcode{F2} 
according to the partial ordering of constraints described in
\ref{temp.constr.order}.
\end{itemize}
\end{quote}


%%
%% Address of overloaded function
%%
\rSec1[over.over]{Address of overloaded function}

The introduction of constraints modifies the rules for determining
which function is selected when taking the address of an overloaded
function. Insert a new paragraph before paragraph 4.

\begin{quote}
\setcounter{Paras}{3}
\pnum
If a single constrained function is selected, and the constraints are
not satisfied (\ref{temp.constr}), the program
is ill-formed. 
\end{quote}

Modify paragraph 4 (paragraph 5 in this document) to incorporate 
constraints in the selection of an overloaded function when its address is 
taken. Also add the following example after that in the original document 
(not shown here).

\begin{quote}
\pnum
If more than one function is selected, any function template 
specializations in the set are eliminated if the set also contains a 
function that is not a function template 
specialization\removed{, and}\added{. 
% 
Any given non-template function
\tcode{F0} is eliminated if the set contains a second non-template
function that is more constrained than \tcode{F0} according to
the partial ordering rules of 
\ref{temp.constr.order}.}

\added{Furthermore,} any given function template specialization
\tcode{F1} is eliminated if the set contains a second function 
template specialization whose function template is more specialized than 
the function template of \tcode{F1} according to the partial ordering 
rules of \ref{temp.func.order}.
\end{quote}

After such eliminations, if any, there shall remain exactly one 
selected function.

\begin{quote}
\enterexample
\begin{codeblock}
void f();                // \#1
void f() requires true ; // \#2
void g() requires false;
void g() requires false and true;

void (*pf)() = &amp;f;         // selects \#2
void (*pg)() = &amp;g;         // error: no matching function
\end{codeblock}
\exitexample
\end{quote}
